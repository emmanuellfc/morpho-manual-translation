# About this online version

This is a conversion of the [Morpho](https://github.com/Morpho-lang/morpho) manual from the original [LyX/TeX](https://github.com/Morpho-lang/morpho-manual) to an `mdBook` format.

*Morpho* is designed by Prof. Timothy J. Atherton at Tufts University. This conversion is my hobby-work done during my time at Tufts as a postdoctoral scholar with him.

Here are my few design goals for this conversion. Some are already met, some are a work in progress:
* Faithfully reproduce all the content of the manual (done)
* Emphasize accessibility, especially of the math content (wip)
* Ensure easy extension in the future by streamlining the automation. (some portions are very much not streamlined right now!)

I found `mdBook` very easy to use and was able to set-up the basic website without any use of HTML/CSS. I am open to suggestions to move this to another tool.

To build the book, you need to have [`mdbook`](https://github.com/rust-lang/mdBook) installed. You can install it with `cargo`:

```bash
cargo install mdbook
```

Then, you need to generate the figures and the reference section by running the `build.py` script:
```bash
python build.py
```
(Make sure to change the `libmorphofolder` path to your local libmorpho folder in the `build.py` script. In the future, we will auto-download the help from GitHub.)

Finally, you can build the book by running `mdbook`:
```bash
mdbook build
```

This will generate the HTML files in the `book` directory. You can view the book by opening the `index.html` file in your browser.

To preview the book, you can run the following command:
```bash
mdbook serve --open
```

## Authoring Guidelines

The general guidelines for writing a book with `mdBook` can be found in their [user guide](https://rust-lang.github.io/mdBook/index.html).

Equations are handled using slightly modified MathJax:
* Inline equations are delimited by `\\(` and `\\)` (same as `mdBook` default).
* Block equations are delimited by `$$` and `$$`.
* Auto-numbering and cross-referencing support is limited, numbering not including chapter and section numbers, and cross-referencing limited to within a single `.md` file.
    - Labeling an equation is same as in TeX:
    ```
        $$
        \begin{equation}
        y = m x + c
        \label{eq:linear}
        \end{equation}
        $$
    ```
    - Cross-referencing within the document can be done by `\eqref`:
    ```
        The linear equation is given by Eq. \eqref{eq:linear}.
    ```
    - See the [Electrostatics example](examples/electrostatics.md) for usage.

* Morpho code is syntax-highlighted using the JavaScript syntax for now:
~~~markdown
```javascript
    var a = 1
```
~~~

renders to
```javascript
    var a = 1
```
## Generating the MarkDown files from the original manual

This mdBook was generated by a series of conversions of the [original LyX file](https://github.com/Morpho-lang/morpho/blob/main/manual/src/manual.lyx).

1. Export the LyX file as a `.tex` file
2. Convert it to markdown with MathJax using Pandoc using the following command:
```bash
    pandoc -s -f latex -t markdown --mathjax manual.tex -o morpho-manual.md
```

3. Replace `$...$` with `\\(...\\)` within this MarkDown file to make the inline math compatible with MathJax (I used a small `re` script available on the GitHub repository under `src/replacedollars.py`).

# Contributing

Contributions are absolutely welcome! Check out the [Issues](https://github.com/joshichaitanya3/morpho-manual/issues) on GitHub or make a pull request!
